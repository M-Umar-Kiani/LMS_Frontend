<app-user-topbar></app-user-topbar>

<div class="browse-container">
  <!-- Filters -->
  <div class="filters-bar">
    <input type="text" placeholder="Search by Title, Author, or Department..." />
    <select [(ngModel)]="selectedCategory" (change)="applyFilter()">
      <option value="">All Categories</option>
      <option value="Book">Book</option>
      <option value="Magazine">Magazine</option>
      <option value="Article">Article</option>
    </select>

    <select [(ngModel)]="selectedDepartment" (change)="applyFilter()">
      <option value="">All Departments</option>
      <option value="Computer Science">Computer Science</option>
      <option value="Management Science">Management Science</option>
      <option value="Social Science">Social Science</option>
    </select>
  </div>

  <!-- Book Table -->
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Book Details</th>
          <th>Category</th>
          <th>Department</th>
          <th>Year</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let book of books">
          <td>
            <div class="book-info">
              <div>
                <strong>{{ limitWords(book.title, 8) }}</strong><br />
                <small>by {{ limitWords(book.author, 5) }}</small><br />
              </div>
            </div>
          </td>
          <td>
            <span class="badge blue">{{ book.category }}</span>
          </td>
          <td>{{ book.department }}</td>
          <td>{{ book.year }}</td>

          <td>
            <button class="icon-btn">⬇️</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="pagination">
      <button (click)="prevPage()" [disabled]="pageNumber === 1">⬅ Previous</button>
      <span>Page {{ pageNumber }}</span>
      <button (click)="nextPage()" [disabled]="books.length < pageSize">Next ➡</button>
    </div>
  </div>
</div>